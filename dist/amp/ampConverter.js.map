{"version":3,"sources":["../../src/amp/ampConverter.js"],"names":["cheerio","AMP","content","documents","$","loadDocument","documentFlag","find","each","img","stringSRC","String","attr","width","height","layout","Content","html","ampIMG","replaceWith","index","element","iframe","attribs","ampiframe","title","id","src","css","ampStyle","ampSocialShare","remove","removeAttr","children","module","exports"],"mappings":"AAAA;;;;AACA;;IAAYA,O;;AACZ;;;;;;IAEMC,G;AACF,iBAAYC,OAAZ,EAAoB;AAAA;;AAChB,aAAKA,OAAL,GAAeA,OAAf;AACH;;;;gCACOA,O,EAAQ;AACZ,gBAAMC,YAAY,wBAAlB;AACA,gBAAIC,IAAID,UAAUE,YAAV,CAAuBH,OAAvB,CAAR;AACA,mBAAOE,CAAP;AACH;;;iCACQA,C,EAAEE,Y,EAAa;AACpBF,cAAE,MAAF,EAAUG,IAAV,CAAe,KAAf,EAAsBC,IAAtB,CAA2B,YAAU;AACjC,oBAAIC,MAAM;AACNC,+BAAUC,OAAOP,EAAE,IAAF,EAAQQ,IAAR,CAAa,KAAb,CAAP,CADJ;AAENC,2BAAO,EAFD;AAGNC,4BAAQ,CAHF;AAINC,4BAAO,YAJD;AAKNC,6BAAQZ,EAAE,IAAF,EAAQa,IAAR;AALF,iBAAV;AAOA,oBAAIC,6BAA2BT,IAAIC,SAA/B,kBAAqDD,IAAII,KAAzD,mBAA4EJ,IAAIK,MAAhF,iBAAkGL,IAAIM,MAAtG,WAAkHN,IAAIO,OAAtH,gBAAJ;AACAZ,kBAAE,IAAF,EAAQe,WAAR,CAAoBD,MAApB;AACC,aAVL;AAWAd,cAAE,QAAF,EAAYI,IAAZ,CAAiB,UAASY,KAAT,EAAgBC,OAAhB,EAAyB;AACtC,oBAAIC,SAASD,QAAQE,OAArB;AACA,oBAAIC,uHAAqHF,OAAOG,KAA5H,YAAwIH,OAAOI,EAA/I,aAAyJJ,OAAOK,GAAhK,mBAAJ;AACAvB,kBAAE,IAAF,EAAQe,WAAR,CAAoBK,SAApB;AACH,aAJD;AAKApB,cAAE,8BAAF,EAAkCI,IAAlC,CAAuC,YAAU;AACzC,oBAAIoB,MAAMxB,EAAE,IAAF,EAAQa,IAAR,EAAV;AACA,oBAAIY,kCAAgCD,GAAhC,aAAJ;AACAxB,kBAAE,IAAF,EAAQe,WAAR,CAAoBU,QAApB;AACP,aAJD;AAKAzB,cAAE,gBAAF,EAAoBI,IAApB,CAAyB,YAAU;AAC/B,oBAAIsB,iaAAJ;AAKA1B,kBAAE,IAAF,EAAQe,WAAR,CAAoBW,cAApB;AACH,aAPD;AAQA,gBAAGxB,gBAAgB,CAAnB,EAAqB;AACjB,uBAAOF,EAAE,MAAF,EAAUa,IAAV,EAAP;AACH,aAFD,MAGI;AACA,uBAAOb,EAAE,MAAF,EAAUa,IAAV,EAAP;AACH;AACJ;;;oCACWb,C,EAAE;AACVA,cAAE,8BAAF,EAAkCI,IAAlC,CAAuC,YAAU;AAC7CJ,kBAAE,IAAF,EAAQ2B,MAAR;AACH,aAFD;AAGA3B,cAAE,qCAAF,EAAyCI,IAAzC,CAA8C,YAAU;AACpDJ,kBAAE,IAAF,EAAQ2B,MAAR;AACH,aAFD;AAGA3B,cAAE,gCAAF,EAAoCI,IAApC,CAAyC,YAAU;AAC/CJ,kBAAE,IAAF,EAAQ2B,MAAR;AACH,aAFD;AAGA3B,cAAE,wBAAF,EAA4BI,IAA5B,CAAiC,YAAU;AACvCJ,kBAAE,IAAF,EAAQ2B,MAAR;AACH,aAFD;AAGA3B,cAAE,GAAF,EAAOI,IAAP,CAAY,YAAW;AACnBJ,kBAAE,IAAF,EAAQ4B,UAAR,CAAmB,OAAnB;AACH,aAFD;AAGA5B,cAAE,MAAF,EAAUI,IAAV,CAAe,YAAW;AACtBJ,kBAAE,IAAF,EAAQ4B,UAAR,CAAmB,OAAnB;AACH,aAFD;AAGA5B,cAAE,MAAF,EAAU6B,QAAV,CAAmB,OAAnB,EAA4BzB,IAA5B,CAAiC,YAAU;AACvCJ,kBAAE,IAAF,EAAQ2B,MAAR;AACH,aAFD;AAGH;;;;;;AAELG,OAAOC,OAAP,GAAiB,EAAClC,QAAD,EAAjB","file":"ampConverter.js","sourcesContent":["'use strict';\nimport * as cheerio from 'cheerio';\nimport {HTML,Head} from '../html/htmlDocument';\n\nclass AMP {\n    constructor(content){\n        this.content = content;\n    }\n    getHTML(content){\n        const documents = new HTML();\n        let $ = documents.loadDocument(content);\n        return $;\n    }\n    quickFix($,documentFlag){\n        $('body').find('img').each(function(){\n            let img = {\n                stringSRC:String($(this).attr('src')), \n                width: 16, \n                height: 9, \n                layout:\"responsive\",\n                Content:$(this).html()\n            };\n            let ampIMG = `<amp-img src = ${img.stringSRC}  width = ${img.width}  height = ${img.height} layout= ${img.layout}>  ${img.Content} </amp-img>`;\n            $(this).replaceWith(ampIMG);\n            });\n        $('iframe').each(function(index, element) {\n            let iframe = element.attribs;\n            let ampiframe = `<amp-iframe width=\"16\" height=\"9\" sandbox=\"allow-scripts allow-same-origin\" layout=\"responsive\" title=${iframe.title} id=${iframe.id} src=${iframe.src}></amp-iframe>`;\n            $(this).replaceWith(ampiframe);\n        });\n        $('style:not([amp-boilerplate])').each(function(){\n                let css = $(this).html();\n                let ampStyle = `<style amp-custom>${css}</style>`\n                $(this).replaceWith(ampStyle);\n        });\n        $('#socialButtons').each(function(){\n            let ampSocialShare = `<div id=\"ampSocialButtons\">\n                <amp-social-share id=\"ampFacebookLink\"  width=\"30\" height=\"30\"  type=\"facebook\"></amp-social-share>\n                <amp-social-share id=\"ampTwitterLink\"  width=\"30\" height=\"30\"   type=\"twitter\"></amp-social-share>\n                <amp-social-share id=\"ampLinkedinLink\"  width=\"30\" height=\"30\"  type=\"linkedin\"></amp-social-share>\n             </div>`;\n            $(this).replaceWith(ampSocialShare);\n        });\n        if(documentFlag == 2){\n            return $('body').html();\n        }\n        else{\n            return $('html').html();\n        }       \n    }\n    quickDelete($){\n        $('script[type=\"text/template\"]').each(function(){\n            $(this).remove(); \n        });\n        $('script[type=\"application/template\"]').each(function(){\n            $(this).remove();\n        });\n        $('script[type=\"text/javascript\"]').each(function(){\n            $(this).remove();\n        });\n        $('link[rel=\"stylesheet\"]').each(function(){\n            $(this).remove();\n        });\n        $('p').each(function() {\n            $(this).removeAttr('style');\n        });\n        $('span').each(function() {\n            $(this).removeAttr('style');\n        });\n        $('body').children('style').each(function(){\n            $(this).remove();\n        });\n    }\n}\nmodule.exports = {AMP};"]}